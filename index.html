<!DOCTYPE html>
<html>
  <head>
    <title>First website</title>
    <meta charset="utf-8">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/picnicss/6.0.0/plugins.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.auth0.com/js/lock/10.3/lock.min.js"></script>
  </head>
  <body>
    <main>
      <ul>
        <li>First <button data-id="1">Like</button></li>
        <li>Second <button data-id="2">Like</button></li>
        <li>Third <button data-id="3">Like</button></li>
        <li>Fourth <button data-id="4">Like</button></li>
      </ul>
    </main>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
      // Load all the likes and add the class 'active' to the ones we liked
      $(document).ready(function(){
        $.get('/likes/', function(likes){
          likes.forEach(function(id){
            $('button[data-id="' + id + '"]').addClass('error');
          });
        });
      });

      // Handle the button clicks
      $('button').on('click', function(e){
        var id = $(e.target).attr('data-id');
        var isLiked = $(e.target).hasClass('active');

        $.ajax({
          url: '/likes/' + id,
          method: isLiked ? 'DELETE' : 'POST',
          success: function(){
            $(e.target).toggleClass('error');
            console.log('Good job!');
          }
        });
      });
    </script>
  </body>
</html>
